<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evolution Reports | Mirror of Truth</title>
    <link rel="stylesheet" href="/shared/foundation.css" />
    <link rel="stylesheet" href="/evolution/reports.css" />
  </head>

  <body>
    <!-- Cosmic Background with Evolution Theme -->
    <div class="cosmic-background">
      <div class="evolution-orb"></div>
      <div class="evolution-orb"></div>
      <div class="evolution-orb"></div>
      <div class="growth-particles"></div>
      <div class="growth-particles"></div>
      <div class="growth-particles"></div>
    </div>

    <!-- Navigation -->
    <nav class="sacred-nav">
      <div class="nav-content">
        <a href="/dashboard" class="nav-link back-link">
          <span>â†</span>
          <span>Your Journey</span>
        </a>

        <div class="nav-center">
          <div class="evolution-nav" id="evolutionNav">
            <div class="nav-title">
              <span class="nav-icon">ğŸ¦‹</span>
              <span class="nav-text">Evolution Reports</span>
            </div>
          </div>
        </div>

        <a href="/reflection" class="nav-link reflect-link">
          <span>âœ¨</span>
          <span>Reflect Again</span>
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="evolution-main">
      <!-- Loading State -->
      <section class="loading-section" id="loadingSection">
        <div class="loading-content">
          <div class="evolution-loader">
            <div class="loader-spiral"></div>
            <div class="loader-center">ğŸ¦‹</div>
          </div>
          <h2 class="loading-title">Analyzing Your Evolution</h2>
          <p class="loading-subtitle">
            Witnessing patterns in your consciousness journey...
          </p>
        </div>
      </section>

      <!-- Error State -->
      <section class="error-section hidden" id="errorSection">
        <div class="error-content">
          <div class="error-icon">ğŸŒ™</div>
          <h2 class="error-title">Evolution Analysis Unavailable</h2>
          <p class="error-subtitle" id="errorMessage">
            Your evolution story is still being written
          </p>
          <div class="error-actions">
            <a href="/reflection" class="sacred-button primary">
              <span>âœ¨</span>
              <span>Continue Your Journey</span>
            </a>
            <a href="/dashboard" class="sacred-button secondary">
              <span>â†</span>
              <span>Return to Dashboard</span>
            </a>
          </div>
        </div>
      </section>

      <!-- Evolution Content -->
      <div class="evolution-container hidden" id="evolutionContainer">
        <!-- Evolution Header -->
        <header class="evolution-header">
          <div class="header-content">
            <div class="evolution-title-section">
              <h1 class="evolution-title">Your Consciousness Evolution</h1>
              <p class="evolution-subtitle">
                Witness the patterns of your becoming across
                <span id="timePeriodText">your sacred journey</span>
              </p>
            </div>

            <div class="evolution-meta">
              <div class="meta-card">
                <div class="meta-icon">ğŸ“ˆ</div>
                <div class="meta-content">
                  <div class="meta-label">Growth Score</div>
                  <div class="meta-value" id="growthScore">--</div>
                </div>
              </div>
              <div class="meta-card">
                <div class="meta-icon">ğŸŒ™</div>
                <div class="meta-content">
                  <div class="meta-label">Reflections Analyzed</div>
                  <div class="meta-value" id="reflectionsAnalyzed">--</div>
                </div>
              </div>
              <div class="meta-card">
                <div class="meta-icon">â°</div>
                <div class="meta-content">
                  <div class="meta-label">Report Generated</div>
                  <div class="meta-value" id="reportDate">--</div>
                </div>
              </div>
            </div>
          </div>
        </header>

        <!-- Evolution Analysis -->
        <section class="evolution-analysis-section">
          <div class="section-header">
            <h2 class="section-title">
              <span class="section-icon">ğŸ”®</span>
              <span>The Mirror's Recognition</span>
            </h2>
            <div class="report-type-badge" id="reportTypeBadge">
              Essential Report
            </div>
          </div>

          <div class="analysis-content">
            <div class="mirror-analysis" id="mirrorAnalysis">
              <div class="analysis-loading">
                <div class="typing-indicator">
                  <span></span><span></span><span></span>
                </div>
                <p>The mirror is revealing your patterns...</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Pattern Recognition -->
        <section class="patterns-section">
          <div class="section-header">
            <h2 class="section-title">
              <span class="section-icon">ğŸŒŠ</span>
              <span>Patterns in Your Becoming</span>
            </h2>
          </div>

          <div class="patterns-grid" id="patternsGrid">
            <!-- Patterns will be dynamically loaded -->
            <div class="pattern-placeholder">
              <div class="pattern-icon">ğŸŒ±</div>
              <div class="pattern-text">
                Discovering your unique patterns...
              </div>
            </div>
          </div>
        </section>

        <!-- Growth Visualization -->
        <section class="growth-section">
          <div class="section-header">
            <h2 class="section-title">
              <span class="section-icon">ğŸ“Š</span>
              <span>Your Evolution Timeline</span>
            </h2>
          </div>

          <div class="growth-visualization">
            <div class="growth-chart" id="growthChart">
              <div class="chart-placeholder">
                <div class="chart-icon">ğŸ“ˆ</div>
                <p>Visualizing your consciousness evolution...</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Insights & Recommendations -->
        <section class="insights-section">
          <div class="section-header">
            <h2 class="section-title">
              <span class="section-icon">ğŸ’</span>
              <span>Wisdom for Your Path</span>
            </h2>
          </div>

          <div class="insights-grid" id="insightsGrid">
            <!-- Insights will be dynamically loaded -->
          </div>
        </section>

        <!-- Continue Journey -->
        <section class="continue-section">
          <div class="continue-content">
            <h2 class="continue-title">Continue Your Evolution</h2>
            <p class="continue-subtitle">
              Your consciousness journey deepens with each reflection
            </p>

            <div class="continue-actions">
              <a href="/reflection" class="continue-btn primary">
                <span class="btn-icon">âœ¨</span>
                <span class="btn-text">Add New Reflection</span>
              </a>

              <button class="continue-btn secondary" id="shareReportBtn">
                <span class="btn-icon">ğŸ”—</span>
                <span class="btn-text">Share Evolution</span>
              </button>

              <button class="continue-btn secondary" id="downloadReportBtn">
                <span class="btn-icon">ğŸ’¾</span>
                <span class="btn-text">Save Report</span>
              </button>
            </div>
          </div>
        </section>
      </div>

      <!-- Reports History Sidebar -->
      <aside class="reports-sidebar" id="reportsSidebar">
        <div class="sidebar-header">
          <h3 class="sidebar-title">
            <span>ğŸ“š</span>
            <span>Your Evolution History</span>
          </h3>
          <button class="sidebar-toggle" id="sidebarToggle">
            <span>â†’</span>
          </button>
        </div>

        <div class="sidebar-content">
          <div class="reports-list" id="reportsList">
            <div class="reports-loading">
              <div class="cosmic-spinner"></div>
              <span>Loading your evolution history...</span>
            </div>
          </div>

          <div class="sidebar-actions">
            <button class="sidebar-btn" id="generateNewReportBtn">
              <span>ğŸ”®</span>
              <span>Generate New Report</span>
            </button>
          </div>
        </div>
      </aside>
    </main>

    <!-- Modal for Report Generation -->
    <div class="modal-overlay hidden" id="generateModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Generate Evolution Report</h3>
          <button class="modal-close" id="closeGenerateModal">Ã—</button>
        </div>

        <div class="modal-body">
          <div class="generation-info">
            <div class="info-item">
              <div class="info-icon">ğŸŒ™</div>
              <div class="info-text">
                <strong>Available Reflections:</strong>
                <span id="availableReflections">--</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-icon">ğŸ¦‹</div>
              <div class="info-text">
                <strong>Report Type:</strong>
                <span id="modalReportType">Essential</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-icon">â±ï¸</div>
              <div class="info-text">
                <strong>Analysis Time:</strong>
                <span>30-60 seconds</span>
              </div>
            </div>
          </div>

          <div class="generation-description">
            <p>
              Your evolution report will analyze patterns across your
              reflections, revealing themes in your consciousness journey and
              tracking your growth over time.
            </p>
          </div>
        </div>

        <div class="modal-actions">
          <button class="modal-btn secondary" id="cancelGenerate">
            Cancel
          </button>
          <button class="modal-btn primary" id="confirmGenerate">
            <span>ğŸ”®</span>
            <span>Generate Report</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="/evolution/reports.js"></script>
  </body>
</html>
