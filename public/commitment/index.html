<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <title>Choose Your Journey | Mirror of Truth</title>
    <style>
      /* Self-Contained Tier Selection - Everything Centered */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        height: 100vh;
        overflow: hidden;
        background: linear-gradient(
          135deg,
          #0f0f23 0%,
          #1a1a2e 25%,
          #16213e 50%,
          #0f0f23 100%
        );
        color: #fff;
        font-family: Inter, -apple-system, BlinkMacSystemFont, sans-serif;
        position: fixed;
        width: 100vw;
      }

      /* Cosmic background animation */
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: radial-gradient(
            circle at 20% 30%,
            rgba(59, 130, 246, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 70%,
            rgba(147, 51, 234, 0.02) 0%,
            transparent 50%
          );
        z-index: 1;
        animation: gentleShift 30s ease-in-out infinite;
      }

      @keyframes gentleShift {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
          opacity: 0.6;
        }
        50% {
          transform: scale(1.05) rotate(180deg);
          opacity: 0.8;
        }
      }

      /* Navigation */
      .back-link {
        position: fixed;
        top: clamp(1rem, 2vh, 1.5rem);
        left: clamp(1rem, 2vw, 1.5rem);
        z-index: 100;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        padding: clamp(0.6rem, 1.5vh, 0.8rem) clamp(1rem, 2vw, 1.2rem);
        border-radius: 50px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        font-size: clamp(0.8rem, 1.8vw, 0.9rem);
        font-weight: 300;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
        white-space: nowrap;
      }

      .back-link:hover {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.9);
        transform: translateY(-2px);
      }

      /* Main container - perfectly centered */
      .main-container {
        position: relative;
        z-index: 10;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: clamp(0.5rem, 1vh, 1rem) clamp(1rem, 2vw, 1.5rem);
        max-width: 95vw;
        margin: 0 auto;
        gap: clamp(0.8rem, 1.5vh, 1.2rem);
      }

      /* Header section - close to middle */
      .header {
        text-align: center;
        flex-shrink: 0;
      }

      .mirror-icon {
        font-size: clamp(1.5rem, 3.2vw, 1.8rem);
        margin-bottom: clamp(0.3rem, 0.6vh, 0.5rem);
        display: block;
        animation: gentlePulse 4s ease-in-out infinite;
      }

      @keyframes gentlePulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.9;
        }
        50% {
          transform: scale(1.05);
          opacity: 1;
        }
      }

      .title {
        font-size: clamp(1.4rem, 3vw, 1.8rem);
        font-weight: 300;
        margin-bottom: clamp(0.2rem, 0.4vh, 0.3rem);
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.95) 0%,
          rgba(255, 255, 255, 0.8) 100%
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        letter-spacing: 0.5px;
      }

      .subtitle {
        font-size: clamp(0.8rem, 1.8vw, 0.95rem);
        opacity: 0.8;
        color: rgba(255, 255, 255, 0.8);
        line-height: 1.3;
        font-weight: 300;
        margin-bottom: clamp(0.1rem, 0.3vh, 0.2rem);
      }

      .note {
        font-size: clamp(0.7rem, 1.5vw, 0.8rem);
        opacity: 0.6;
        color: rgba(255, 255, 255, 0.6);
        font-style: italic;
      }

      /* TIER CARDS - CENTER FOCUS */
      .tiers-section {
        width: 100%;
        max-width: 90vw;
        flex-shrink: 0;
      }

      .tiers-grid {
        display: flex;
        gap: clamp(1rem, 1.8vw, 1.5rem);
        width: 100%;
        justify-content: center;
        align-items: stretch;
      }

      .tier-card {
        flex: 1;
        min-width: 0;
        max-width: 300px;
        background: rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: clamp(12px, 1.8vw, 18px);
        padding: clamp(1.1rem, 2.2vh, 1.6rem);
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: visible;
        display: flex;
        flex-direction: column;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }

      .tier-card:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
      }

      .tier-card.selected {
        background: rgba(16, 185, 129, 0.1);
        border-color: rgba(16, 185, 129, 0.3);
        box-shadow: 0 0 30px rgba(16, 185, 129, 0.15);
      }

      .tier-card.recommended {
        border-color: rgba(251, 146, 60, 0.4);
        background: rgba(251, 146, 60, 0.08);
      }

      .tier-card.recommended.selected {
        border-color: rgba(251, 146, 60, 0.6);
        background: rgba(251, 146, 60, 0.15);
        box-shadow: 0 0 30px rgba(251, 146, 60, 0.2);
      }

      .tier-card.premium {
        border-color: rgba(147, 51, 234, 0.3);
        background: rgba(147, 51, 234, 0.05);
      }

      .tier-card.premium.selected {
        border-color: rgba(147, 51, 234, 0.5);
        background: rgba(147, 51, 234, 0.12);
        box-shadow: 0 0 30px rgba(147, 51, 234, 0.15);
      }

      /* POPULAR BADGE - EXACT CORNER POSITION */
      .tier-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: linear-gradient(135deg, #ff6b35, #f7931e);
        color: white;
        padding: clamp(0.35rem, 0.7vh, 0.5rem) clamp(0.6rem, 1.3vw, 0.8rem);
        border-radius: 12px;
        font-size: clamp(0.6rem, 1.2vw, 0.7rem);
        font-weight: 700;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        box-shadow: 0 4px 15px rgba(255, 107, 53, 0.5);
        animation: badgePulse 2s ease-in-out infinite;
        z-index: 10;
      }

      @keyframes badgePulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      /* Tier header */
      .tier-header {
        text-align: center;
        margin-bottom: clamp(0.7rem, 1.3vh, 1rem);
      }

      .tier-name {
        font-size: clamp(1.05rem, 2.1vw, 1.25rem);
        font-weight: 500;
        color: rgba(255, 255, 255, 0.95);
        margin-bottom: clamp(0.3rem, 0.7vh, 0.5rem);
      }

      .tier-price {
        font-size: clamp(1.5rem, 2.8vw, 2rem);
        font-weight: 600;
        margin-bottom: clamp(0.15rem, 0.5vh, 0.3rem);
      }

      .tier-price.free {
        color: #6ee7b7;
      }

      .tier-price.essential {
        color: #fb923c;
      }

      .tier-price.premium {
        color: #c084fc;
      }

      .tier-period {
        font-size: clamp(0.7rem, 1.5vw, 0.8rem);
        color: rgba(255, 255, 255, 0.6);
      }

      /* Tier description */
      .tier-description {
        font-size: clamp(0.8rem, 1.7vw, 0.9rem);
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: clamp(0.7rem, 1.3vh, 1rem);
        line-height: 1.3;
        text-align: center;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Tier features */
      .tier-features {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .tier-features li {
        padding: clamp(0.2rem, 0.5vh, 0.35rem) 0;
        font-size: clamp(0.7rem, 1.5vw, 0.8rem);
        color: rgba(255, 255, 255, 0.8);
        display: flex;
        align-items: center;
        gap: clamp(0.35rem, 0.7vw, 0.5rem);
        line-height: 1.2;
      }

      .tier-features li .icon {
        font-size: clamp(0.75rem, 1.6vw, 0.85rem);
        flex-shrink: 0;
      }

      /* Footer section - close to middle */
      .footer {
        text-align: center;
        flex-shrink: 0;
      }

      .selected-tier {
        font-size: clamp(0.8rem, 1.7vw, 0.9rem);
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: clamp(0.6rem, 1.2vh, 0.8rem);
      }

      .selected-name {
        color: #10b981;
        font-weight: 500;
      }

      .continue-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: clamp(0.45rem, 1vw, 0.6rem);
        padding: clamp(0.9rem, 2vh, 1.2rem) clamp(1.6rem, 3.5vw, 2.2rem);
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.12) 0%,
          rgba(16, 185, 129, 0.08) 50%,
          rgba(255, 255, 255, 0.06) 100%
        );
        backdrop-filter: blur(30px);
        border: 2px solid rgba(16, 185, 129, 0.2);
        border-radius: clamp(10px, 1.6vw, 14px);
        color: #fff;
        font-size: clamp(0.85rem, 2vw, 0.95rem);
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        letter-spacing: 0.3px;
        text-decoration: none;
        outline: none;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
        text-align: center;
        white-space: nowrap;
      }

      .continue-button:hover {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.18) 0%,
          rgba(16, 185, 129, 0.12) 50%,
          rgba(255, 255, 255, 0.08) 100%
        );
        border-color: rgba(16, 185, 129, 0.3);
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 10px 30px rgba(16, 185, 129, 0.15);
      }

      .continue-button:active {
        transform: translateY(-1px) scale(0.98);
      }

      /* Mobile responsive - KEEP HORIZONTAL LONGER */
      @media (max-width: 768px) {
        .main-container {
          padding: clamp(0.4rem, 0.8vh, 0.7rem) clamp(0.5rem, 1vw, 0.8rem);
          gap: clamp(0.6rem, 1.2vh, 0.9rem);
        }

        .tiers-grid {
          gap: clamp(0.7rem, 1.3vw, 0.9rem);
        }

        .tier-card {
          padding: clamp(0.9rem, 1.8vh, 1.2rem);
          max-width: 250px;
        }

        .tier-features li {
          font-size: clamp(0.65rem, 1.4vw, 0.75rem);
        }

        .tier-badge {
          right: -6px;
          top: -6px;
          font-size: clamp(0.55rem, 1.1vw, 0.65rem);
          padding: clamp(0.3rem, 0.6vh, 0.4rem) clamp(0.5rem, 1.1vw, 0.7rem);
        }
      }

      /* ONLY stack on very small screens */
      @media (max-width: 480px) {
        .tiers-grid {
          flex-direction: column;
          gap: clamp(0.7rem, 1.2vh, 0.9rem);
          align-items: center;
        }

        .tier-card {
          max-width: 90vw;
          width: 100%;
        }

        .tier-badge {
          right: clamp(1rem, 3vw, 1.5rem);
          top: -6px;
        }

        .main-container {
          max-width: 98vw;
          gap: clamp(0.5rem, 1vh, 0.7rem);
        }
      }

      /* Mobile landscape optimization */
      @media (max-height: 600px) and (orientation: landscape) {
        .main-container {
          padding: clamp(0.2rem, 0.6vh, 0.5rem) clamp(1rem, 2vw, 1.5rem);
          gap: clamp(0.4rem, 0.8vh, 0.6rem);
        }

        .mirror-icon {
          font-size: clamp(1.2rem, 2.2vw, 1.6rem);
          margin-bottom: clamp(0.2rem, 0.4vh, 0.3rem);
        }

        .note {
          display: none;
        }
      }

      /* Ultra small screens */
      @media (max-height: 500px) {
        .subtitle {
          display: none;
        }

        .main-container {
          gap: clamp(0.3rem, 0.6vh, 0.5rem);
        }
      }

      /* Reduce motion for accessibility */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Focus visible for accessibility */
      .continue-button:focus-visible,
      .tier-card:focus-visible,
      .back-link:focus-visible {
        outline: 2px solid rgba(16, 185, 129, 0.6);
        outline-offset: 2px;
      }

      /* Remove all default focus outlines */
      * {
        outline: none !important;
        -webkit-tap-highlight-color: transparent;
      }
    </style>
  </head>

  <body>
    <!-- Navigation -->
    <a href="/" class="back-link">
      <span>‚Üê</span>
      <span>Return to home</span>
    </a>

    <!-- Main Container -->
    <div class="main-container">
      <!-- Header -->
      <div class="header">
        <div class="mirror-icon">ü™û</div>
        <h1 class="title">Choose Your Journey</h1>
        <p class="subtitle">
          Every path leads to truth‚Äîpick the one that calls to you
        </p>
        <p class="note">you can always upgrade later</p>
      </div>

      <!-- Tiers Section -->
      <div class="tiers-section">
        <div class="tiers-grid">
          <!-- Free Tier -->
          <div
            class="tier-card selected"
            data-tier="free"
            data-price="0"
            data-period="forever"
            tabindex="0"
          >
            <div class="tier-header">
              <div class="tier-name">Seeker</div>
              <div class="tier-price free">Free</div>
              <div class="tier-period">forever</div>
            </div>
            <div class="tier-description">
              Perfect for exploring what the mirror can show you
            </div>
            <ul class="tier-features">
              <li><span class="icon">üåô</span> 1 reflection per month</li>
              <li>
                <span class="icon">üíæ</span> Your reflections saved forever
              </li>
              <li><span class="icon">ü§ñ</span> Essential AI insights</li>
              <li><span class="icon">üîí</span> Private & secure</li>
            </ul>
          </div>

          <!-- Essential Tier -->
          <div
            class="tier-card recommended"
            data-tier="essential"
            data-price="4.99"
            data-period="monthly"
            tabindex="0"
          >
            <div class="tier-badge">Popular</div>
            <div class="tier-header">
              <div class="tier-name">Essential</div>
              <div class="tier-price essential">$4.99</div>
              <div class="tier-period">per month</div>
            </div>
            <div class="tier-description">
              For those ready to develop a practice of self-reflection
            </div>
            <ul class="tier-features">
              <li><span class="icon">‚ú®</span> 5 reflections per month</li>
              <li><span class="icon">üìö</span> Complete reflection history</li>
              <li><span class="icon">üå±</span> Evolution insights</li>
              <li><span class="icon">üîç</span> Search & organize</li>
              <li><span class="icon">üìä</span> Progress tracking</li>
            </ul>
          </div>

          <!-- Premium Tier -->
          <div
            class="tier-card premium"
            data-tier="premium"
            data-price="9.99"
            data-period="monthly"
            tabindex="0"
          >
            <div class="tier-header">
              <div class="tier-name">Premium</div>
              <div class="tier-price premium">$9.99</div>
              <div class="tier-period">per month</div>
            </div>
            <div class="tier-description">
              For deep souls seeking profound recognition and growth
            </div>
            <ul class="tier-features">
              <li><span class="icon">üî•</span> 10 reflections per month</li>
              <li><span class="icon">üß†</span> Extended AI thinking</li>
              <li><span class="icon">ü¶ã</span> Detailed evolution reports</li>
              <li><span class="icon">üéØ</span> Pattern recognition</li>
              <li><span class="icon">‚ö°</span> Priority support</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <p class="selected-tier">
          Selected:
          <span class="selected-name" id="selectedTierName">Seeker (Free)</span>
        </p>
        <a
          href="/register?tier=free"
          class="continue-button"
          id="continueButton"
        >
          <span>‚ú®</span>
          <span>Continue to Sign Up</span>
        </a>
      </div>
    </div>

    <script>
      // Tier Selection Logic - Perfectly Centered
      let selectedTier = "free";

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        setupTierSelection();
        setupKeyboardNavigation();
      });

      function setupTierSelection() {
        const tierCards = document.querySelectorAll(".tier-card");

        tierCards.forEach((card) => {
          card.addEventListener("click", function () {
            const tier = this.dataset.tier;
            const price = this.dataset.price;
            const period = this.dataset.period;

            selectTier(tier, price, period);
          });

          // Keyboard support
          card.addEventListener("keydown", function (e) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              this.click();
            }
          });
        });
      }

      function selectTier(tier, price, period) {
        selectedTier = tier;

        // Update visual selection
        document.querySelectorAll(".tier-card").forEach((card) => {
          card.classList.remove("selected");
        });

        const selectedCard = document.querySelector(`[data-tier="${tier}"]`);
        if (selectedCard) {
          selectedCard.classList.add("selected");
        }

        // Update selected tier display
        const tierNames = {
          free: "Seeker (Free)",
          essential: "Essential ($4.99/month)",
          premium: "Premium ($9.99/month)",
        };

        document.getElementById("selectedTierName").textContent =
          tierNames[tier] || "Free";

        // Update continue button
        const continueButton = document.getElementById("continueButton");
        continueButton.href = `/register?tier=${tier}`;

        // Update button text based on tier
        const buttonText = continueButton.querySelector("span:last-child");
        if (tier === "free") {
          buttonText.textContent = "Continue to Sign Up";
        } else {
          buttonText.textContent = "Continue to Sign Up";
        }

        console.log(`‚úÖ Selected tier: ${tier}`);
      }

      function setupKeyboardNavigation() {
        document.addEventListener("keydown", function (e) {
          const tierCards = document.querySelectorAll(".tier-card");
          const currentIndex = Array.from(tierCards).findIndex((card) =>
            card.classList.contains("selected")
          );

          // Arrow key navigation
          if (e.key === "ArrowLeft" && currentIndex > 0) {
            e.preventDefault();
            tierCards[currentIndex - 1].click();
            tierCards[currentIndex - 1].focus();
          } else if (
            e.key === "ArrowRight" &&
            currentIndex < tierCards.length - 1
          ) {
            e.preventDefault();
            tierCards[currentIndex + 1].click();
            tierCards[currentIndex + 1].focus();
          }

          // Enter to continue
          if (e.key === "Enter" && e.target === document.body) {
            document.getElementById("continueButton").click();
          }
        });
      }

      // Debug (Development Only)
      if (window.location.hostname === "localhost") {
        console.log("ü™û Sacred Tier Selection - Perfectly Centered");

        window.tierDebug = {
          selectedTier: () => selectedTier,
          selectTier: (tier) => {
            const card = document.querySelector(`[data-tier="${tier}"]`);
            if (card) {
              card.click();
            }
          },
        };
      }
    </script>
  </body>
</html>
