<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Your Reflection | Mirror of Truth</title>
    <link rel="stylesheet" href="/shared/foundation.css" />
    <link rel="stylesheet" href="/mirror/reflection.css" />
  </head>

  <body>
    <!-- Tone-specific background animations added via JS -->

    <div class="container">
      <!-- Questions Section -->
      <div class="experience-section active" id="questions">
        <form id="reflectionForm" class="questions-form">
          <!-- Tone Picker -->
          <div class="tone-group">
            <div class="tone-label">Choose the voice of your reflection</div>

            <div class="tone-btn selected" data-tone="fusion">
              Let the Mirror Breathe
            </div>
            <div class="tone-btn" data-tone="gentle">Gentle Clarity</div>
            <div class="tone-btn" data-tone="intense">Luminous Fire</div>
          </div>

          <div class="question-group">
            <div class="question-number">Question 1</div>
            <div class="question-text">What is your dream?</div>
            <div class="question-subtitle">
              Choose just one â€” the one that calls you most right now.
            </div>
            <textarea
              id="dreamInput"
              name="dream"
              class="question-textarea sacred-input"
              placeholder="Write the dream that calls you..."
              required
            ></textarea>
          </div>

          <div class="question-group">
            <div class="question-number">Question 2</div>
            <div class="question-text">
              What is your plan for achieving this dream?
            </div>
            <div class="question-subtitle">
              Write what you already know. It's okay if it's unclear.
            </div>
            <textarea
              id="planInput"
              name="plan"
              class="question-textarea sacred-input"
              placeholder="Describe any plan (or absence of plan)..."
              required
            ></textarea>
          </div>

          <div class="question-group">
            <div class="question-number">Question 3</div>
            <div class="question-text">
              Have you set a definite date for fulfilling your dream?
            </div>
            <div class="yes-no-buttons">
              <div class="yes-no-btn" id="yesBtn" data-value="yes">Yes</div>
              <div class="yes-no-btn" id="noBtn" data-value="no">No</div>
            </div>
            <input type="hidden" name="hasDate" required />
            <div
              class="date-container"
              id="dateContainer"
              style="display: none"
            >
              <label>What is the date?</label>
              <input type="date" class="sacred-input" name="dreamDate" />
            </div>
          </div>

          <div class="question-group">
            <div class="question-number">Question 4</div>
            <div class="question-text">
              What is your current relationship with this dream?
            </div>
            <div class="question-subtitle">
              Do you believe you'll achieve it? Why or why not?
            </div>
            <textarea
              id="relationshipInput"
              name="relationship"
              class="question-textarea sacred-input"
              placeholder="How do you relate to this dream now?"
              required
            ></textarea>
          </div>

          <div class="question-group">
            <div class="question-number">Question 5</div>
            <div class="question-text">
              What are you willing to give in return?
            </div>
            <div class="question-subtitle">
              Energy, focus, love, time â€” what will you offer to this dream?
            </div>
            <textarea
              id="offeringInput"
              name="offering"
              class="question-textarea sacred-input"
              placeholder="What will you offer in return?"
              required
            ></textarea>
          </div>

          <button type="submit" class="submit-btn" id="submitBtn">
            Receive Your Reflection
          </button>
        </form>
      </div>

      <!-- Loading Section -->
      <div class="experience-section hidden" id="loading">
        <div class="loading-container">
          <div class="loading-circle"></div>
          <div class="loading-text">Reflecting your truth...</div>
        </div>
      </div>

      <!-- Results Section -->
      <div class="experience-section hidden" id="results">
        <div class="results">
          <div class="admin-notice" id="adminNotice" style="display: none">
            <span>âœ¨ Admin session â€” unlimited reflections</span>
          </div>
          <div class="results-backdrop">
            <div class="results-content" id="reflectionContent"></div>
          </div>
          <div class="results-actions">
            <button
              class="sacred-button"
              id="emailBtn"
              onclick="emailReflection()"
            >
              <span>ðŸ“§</span><span>Mail me this reflection</span>
            </button>
            <a href="/behind-the-mirror" class="sacred-button creator-button">
              <span>ðŸ¤²</span><span>Who created this?</span>
            </a>
            <a href="/" class="sacred-button">
              <span>ðŸªž</span><span>Return to Portal</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <script src="/mirror/reflection.js"></script>

    <style>
      /* Creator button special styling */
      .creator-button {
        background: linear-gradient(
          135deg,
          rgba(147, 51, 234, 0.15),
          rgba(59, 130, 246, 0.1)
        ) !important;
        border-color: rgba(147, 51, 234, 0.3) !important;
        position: relative;
        overflow: hidden;
      }

      .creator-button::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          rgba(147, 51, 234, 0.1),
          rgba(59, 130, 246, 0.05)
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .creator-button:hover::before {
        opacity: 1;
      }

      .creator-button:hover {
        border-color: rgba(147, 51, 234, 0.5) !important;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(147, 51, 234, 0.2) !important;
      }
    </style>
  </body>
</html>
